(function(){"use strict";var t={7726:function(t,e,a){var s=a(6369),r=function(){var t=this,e=t._self._c;return e("router-view")},i=[],n=a(1001),o={},l=(0,n.Z)(o,r,i,!1,null,null,null),c=l.exports,u=(a(1062),a(9926)),m=a(2631),p=function(){var t=this,e=t._self._c;return e("div",{staticClass:"layout-page"},[e("router-view"),e("van-tabbar",{attrs:{route:""}},[e("van-tabbar-item",{attrs:{to:"/myarticle",icon:"fire-o"}},[t._v("面经")]),e("van-tabbar-item",{attrs:{to:"/mycollect",icon:"star-o"}},[t._v("收藏")]),e("van-tabbar-item",{attrs:{to:"/mylike",icon:"like-o"}},[t._v("点赞")]),e("van-tabbar-item",{attrs:{to:"/myuser",icon:"user-o"}},[t._v("我的")])],1)],1)},d=[],h={name:"layout-page"},v=h,f=(0,n.Z)(v,p,d,!1,null,"e20cda98",null),g=f.exports,b=function(){var t=this,e=t._self._c;return e("div",{staticClass:"login-page"},[e("van-nav-bar",{attrs:{title:"面经登录"}}),e("van-form",{on:{submit:t.onSubmit}},[e("van-field",{attrs:{name:"用户名",label:"用户名",placeholder:"用户名",rules:t.rules.username},model:{value:t.user.username,callback:function(e){t.$set(t.user,"username",e)},expression:"user.username"}}),e("van-field",{attrs:{type:"password",name:"密码",label:"密码",placeholder:"密码",rules:t.rules.password},model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}}),e("div",{staticStyle:{margin:"16px"}},[e("van-button",{attrs:{block:"",type:"info","native-type":"submit"}},[t._v("登录")])],1)],1),e("van-cell",[e("router-link",{staticClass:"link",attrs:{to:"/register"}},[t._v("没有账号,去注册")])],1)],1)},y=[],w=(a(7658),a(6265)),k=a.n(w);const _="hmmj-mobile-token",Z=t=>{localStorage.setItem(_,t)},x=()=>localStorage.getItem(_),C=()=>{localStorage.removeItem(_)},P=k().create({baseURL:"http://interview-api-t.itheima.net/",timeout:5e3});P.interceptors.request.use((function(t){const e=x();return e&&(t.headers.Authorization=`Bearer ${e}`),t}),(function(t){return Promise.reject(t)})),P.interceptors.response.use((function(t){return t.data}),(function(t){return 401===t.response.data.code?(u.Z.fail(t.response.data.message),C(),setTimeout((()=>{"/login"!==Ct.history.current.fullPath&&Ct.push("/login")}),2e3)):u.Z.fail(t.response.data.message),Promise.reject(t)}));const $=t=>P({url:"/h5/user/register",method:"post",data:t}),j=t=>P({url:"/h5/user/login",method:"post",data:t}),S=t=>P({url:"/h5/interview/opt",method:"post",data:t}),O=t=>P({url:"/h5/interview/opt",method:"post",data:t}),T=()=>P({url:"/h5/user/currentUser"});var F={name:"login-page",data(){return{user:{username:"",password:""},rules:{username:[{required:!0,message:"请填写账号"},{pattern:/^\w{5,}$/,message:"账号至少5位"}],password:[{required:!0,message:"请填写密码"},{pattern:/^\w{6,}$/,message:"密码至少6位"}]}}},methods:{async onSubmit(){try{const t=await j(this.user);Z(t.data.token),await this.$router.push({path:"/"})}catch(t){}}}},L=F,I=(0,n.Z)(L,b,y,!1,null,"55da3e76",null),q=I.exports,z=function(){var t=this,e=t._self._c;return e("div",{staticClass:"register-page"},[e("van-nav-bar",{attrs:{title:"面经注册"}}),e("van-form",{on:{submit:t.onSubmit}},[e("van-field",{attrs:{name:"用户名",label:"用户名",placeholder:"用户名",rules:t.rules.username},model:{value:t.user.username,callback:function(e){t.$set(t.user,"username",e)},expression:"user.username"}}),e("van-field",{attrs:{type:"password",name:"密码",label:"密码",placeholder:"密码",rules:t.rules.password},model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}}),e("div",{staticStyle:{margin:"16px"}},[e("van-button",{attrs:{block:"",type:"primary","native-type":"submit"}},[t._v("注册")])],1)],1),e("van-cell",[e("router-link",{staticClass:"link",attrs:{to:"/login"}},[t._v("有账号,去登录")])],1)],1)},A=[],E={name:"register-page",data(){return{user:{username:"",password:""},rules:{username:[{required:!0,message:"请填写账号"},{pattern:/^\w{5,}$/,message:"账号至少5位"}],password:[{required:!0,message:"请填写密码"},{pattern:/^\w{6,}$/,message:"密码至少6位"}]}}},methods:{async onSubmit(){try{await $(this.user),this.$toast.success("注册成功!"),await this.$router.push({name:"mblogin"})}catch(t){}}}},M=E,U=(0,n.Z)(M,z,A,!1,null,"69bb278a",null),B=U.exports,H=function(){var t=this,e=t._self._c;return e("div",{staticClass:"detail-page"},[e("van-nav-bar",{attrs:{title:"面经详情","left-text":"返回","left-arrow":""},on:{"click-left":t.onClickLeft}}),e("article-item",{attrs:{item:t.item}}),e("div",{staticClass:"opt"},[e("van-icon",{class:{active:t.item.likeFlag},attrs:{name:"like-o",size:"30"},on:{click:t.onLike}}),e("van-icon",{class:{active:t.item.collectFlag},attrs:{name:"star-o",size:"30"},on:{click:t.onCollect}})],1)],1)},R=[];const D=t=>P({url:"/h5/interview/query",params:t}),G=t=>P({url:"/h5/interview/show",params:{id:t}}),J=t=>P({url:"/h5/interview/opt/list",params:t}),K=t=>P({url:"/h5/interview/opt/list",params:t});var N={name:"detail-page",data(){return{item:{}}},async created(){const t=await G(this.$route.params.id);this.item=t.data},methods:{onClickLeft(){this.$router.back()},async onLike(){this.item.likeFlag=!this.item.likeFlag;try{await S({id:this.item.id,optType:1}),this.item.likeFlag?this.$toast.success("点赞成功"):this.$toast.success("取消点赞")}catch(t){this.item.likeFlag=!1,this.$toast.fail("点赞失败")}},async onCollect(){this.item.collectFlag=!this.item.collectFlag;try{await O({id:this.item.id,optType:2}),this.item.collectFlag?this.$toast.success("收藏成功"):this.$toast.success("取消收藏")}catch(t){this.item.collectFlag=!1,this.$toast.fail("收藏失败")}}}},Q=N,V=(0,n.Z)(Q,H,R,!1,null,"1afe7276",null),W=V.exports,X=function(){var t=this,e=t._self._c;return e("div",{staticClass:"like-page"},[e("van-nav-bar",{attrs:{title:"我的点赞"}}),t._l(t.items,(function(t){return e("article-item",{key:t.id,attrs:{item:t}})}))],2)},Y=[],tt={name:"like-page",data(){return{items:[]}},async created(){const t=await J({optType:1,pageSize:10,page:1});this.items=t.data.rows},methods:{}},et=tt,at=(0,n.Z)(et,X,Y,!1,null,"ad20bf86",null),st=at.exports,rt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"article-page"},[e("nav",{staticClass:"my-nav van-hairline--bottom"},[e("a",{class:{active:"weight_desc"===t.sorter},attrs:{href:"javascript:;"},on:{click:function(e){return t.changeTab("weight_desc")}}},[t._v("推荐")]),e("a",{class:{active:null==t.sorter},attrs:{href:"javascript:;"},on:{click:function(e){return t.changeTab(null)}}},[t._v("最新")]),t._m(0)]),e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.rows,(function(t){return e("article-item",{key:t.id,attrs:{item:t}})})),1)],1)},it=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"logo"},[e("img",{attrs:{src:a(6949),alt:""}})])}],nt={name:"article-page",data(){return{rows:[],loading:!1,finished:!1,page:1,sorter:"weight_desc"}},methods:{changeTab(t){this.sorter=t,this.loading=!1,this.page=1,this.finished=!1,this.rows=[],this.onLoad()},async onLoad(){const t=await D({current:this.page++,pageSize:10,sorter:this.sorter});this.rows.push(...t.data.rows),this.loading=!1,this.rows.length>=t.data.total&&(this.finished=!0)}}},ot=nt,lt=(0,n.Z)(ot,rt,it,!1,null,"e76d3bb4",null),ct=lt.exports,ut=function(){var t=this,e=t._self._c;return e("div",{staticClass:"user-page"},[e("div",{staticClass:"user"},[e("img",{attrs:{src:t.userInfo.avatar}}),e("h3",[t._v(t._s(t.userInfo.username))])]),e("van-grid",{attrs:{"column-num":3}},[e("van-grid-item",{attrs:{icon:"clock-o",text:"历史记录"}}),e("van-grid-item",{attrs:{icon:"bookmark-o",text:"我的收藏",to:"/mycollect"}}),e("van-grid-item",{attrs:{icon:"thumb-circle-o",text:"我的点赞",to:"mylike"}})],1),e("van-cell-group",{staticClass:"mt20"},[e("van-cell",{attrs:{title:"推荐分享","is-link":""}}),e("van-cell",{attrs:{title:"意见反馈","is-link":""}}),e("van-cell",{attrs:{title:"关于我们","is-link":""}}),e("van-cell",{attrs:{title:"退出登录","is-link":"",to:"/login"},on:{click:t.outLogin}})],1)],1)},mt=[],pt={name:"user-page",data(){return{userInfo:{}}},async created(){const t=await T();this.userInfo=t.data},methods:{outLogin(){C()}}},dt=pt,ht=(0,n.Z)(dt,ut,mt,!1,null,"104ac518",null),vt=ht.exports,ft=function(){var t=this,e=t._self._c;return e("div",{staticClass:"collect-page"},[e("van-nav-bar",{attrs:{title:"我的收藏"}}),t._l(t.items,(function(t){return e("article-item",{key:t.id,attrs:{item:t}})}))],2)},gt=[],bt={name:"collect-page",data(){return{items:[]}},async created(){const t=await K({optType:1,pageSize:10,page:1});this.items=t.data.rows},methods:{}},yt=bt,wt=(0,n.Z)(yt,ft,gt,!1,null,"2bbb627a",null),kt=wt.exports;s.ZP.use(m.ZP);const _t=[{path:"/",redirect:"myarticle"},{name:"mblayout",path:"/",children:[{name:"mylike",path:"mylike",component:st},{name:"myarticle",path:"myarticle",component:ct},{name:"myuser",path:"myuser",component:vt},{name:"mycollect",path:"mycollect",component:kt}],component:g},{name:"mblogin",path:"/login",component:q},{name:"mbregister",path:"/register",component:B},{name:"mbdetail",path:"/detail/:id",component:W}],Zt=new m.ZP({routes:_t}),xt=["/login","/register"];Zt.beforeEach(((t,e,a)=>{xt.includes(t.path)||x()?a():((0,u.Z)("请先登录"),a("/login"))}));var Ct=Zt,Pt=(a(2210),a(4159)),$t=(a(2685),a(7165)),jt=(a(7983),a(3838)),St=(a(4809),a(9858)),Ot=(a(3970),a(140)),Tt=(a(3255),a(797)),Ft=(a(2406),a(9864)),Lt=(a(9578),a(6631)),It=(a(289),a(3142)),qt=(a(5737),a(5389)),zt=(a(9382),a(4273)),At=(a(3096),a(2628)),Et=(a(4072),a(9245)),Mt=(a(5603),a(4398));s.ZP.use(Mt.Z),s.ZP.use(Et.Z),s.ZP.use(At.Z),s.ZP.use(zt.Z),s.ZP.use(qt.Z),s.ZP.use(It.Z),s.ZP.use(Lt.Z),s.ZP.use(Ft.Z),s.ZP.use(u.Z),s.ZP.use(Tt.Z),s.ZP.use(Ot.Z),s.ZP.use(St.Z),s.ZP.use(jt.Z),s.ZP.use($t.Z),s.ZP.use(Pt.Z);var Ut=function(){var t=this,e=t._self._c;return e("van-cell",{staticClass:"article-item",attrs:{to:/detail/+t.item.id},scopedSlots:t._u([{key:"title",fn:function(){return[e("div",{staticClass:"head"},[e("img",{attrs:{src:t.item.avatar,alt:""}}),e("div",{staticClass:"con"},[e("p",{staticClass:"title van-ellipsis"},[t._v(t._s(t.item.stem))]),e("p",{staticClass:"other"},[t._v(t._s(t.item.creator)+" | "+t._s(t.item.createdAt))])])])]},proxy:!0},{key:"label",fn:function(){return[e("div",{staticClass:"body van-multi-ellipsis--l2",domProps:{innerHTML:t._s(t.item.content)}}),e("div",{staticClass:"foot"},[t._v("点赞 "+t._s(t.item.likeCount)+" | 浏览 "+t._s(t.item.views))])]},proxy:!0}])})},Bt=[],Ht={props:{item:{type:Object,required:!0}}},Rt=Ht,Dt=(0,n.Z)(Rt,Ut,Bt,!1,null,"67531f86",null),Gt=Dt.exports;s.ZP.config.productionTip=!1,s.ZP.component("ArticleItem",Gt),new s.ZP({router:Ct,render:t=>t(c)}).$mount("#app")},6949:function(t,e,a){t.exports=a.p+"img/logo.dbd40807.png"}},e={};function a(s){var r=e[s];if(void 0!==r)return r.exports;var i=e[s]={exports:{}};return t[s](i,i.exports,a),i.exports}a.m=t,function(){var t=[];a.O=function(e,s,r,i){if(!s){var n=1/0;for(u=0;u<t.length;u++){s=t[u][0],r=t[u][1],i=t[u][2];for(var o=!0,l=0;l<s.length;l++)(!1&i||n>=i)&&Object.keys(a.O).every((function(t){return a.O[t](s[l])}))?s.splice(l--,1):(o=!1,i<n&&(n=i));if(o){t.splice(u--,1);var c=r();void 0!==c&&(e=c)}}return e}i=i||0;for(var u=t.length;u>0&&t[u-1][2]>i;u--)t[u]=t[u-1];t[u]=[s,r,i]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.p=""}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,s){var r,i,n=s[0],o=s[1],l=s[2],c=0;if(n.some((function(e){return 0!==t[e]}))){for(r in o)a.o(o,r)&&(a.m[r]=o[r]);if(l)var u=l(a)}for(e&&e(s);c<n.length;c++)i=n[c],a.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return a.O(u)},s=self["webpackChunkmobile_mj"]=self["webpackChunkmobile_mj"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(7726)}));s=a.O(s)})();
//# sourceMappingURL=app.ec4d6ef6.js.map